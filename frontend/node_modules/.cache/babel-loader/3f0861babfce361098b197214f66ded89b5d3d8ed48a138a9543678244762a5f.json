{"ast":null,"code":"// ============================================================================\n// LEARNING: This is a utility module - a reusable collection of functions\n// that handle communication with the backend API. Modules like this keep\n// our code organized and maintainable by separating concerns.\n// ============================================================================\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\nclass APIClient {\n  /**\n   * =========================================================================\n   * LEARNING: Static methods belong to the class itself, not instances\n   * This means we can call APIClient.analyzeText() without creating a new\n   * instance. It's a common pattern for utility functions.\n   * =========================================================================\n   */\n\n  /**\n   * Analyze text with AI-powered SQL generation\n   * @param {string} userMessage - The user's question about their data\n   * @returns {Promise<Object>} - {success, summary, questions, results, error}\n   */\n  static async analyzeText(userMessage) {\n    try {\n      const response = await fetch(`${API_BASE_URL}/text/analyze`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          user_message: userMessage\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`API error: ${response.status}`);\n      }\n      const data = await response.json();\n      if (data.success) {\n        return {\n          success: true,\n          summary: data.summary,\n          questions: data.questions || [],\n          results: data.results || [],\n          timestamp: new Date().toISOString()\n        };\n      } else {\n        return {\n          success: false,\n          error: data.error || 'Unknown error occurred'\n        };\n      }\n    } catch (error) {\n      console.error('Text analysis error:', error);\n      return {\n        success: false,\n        error: error.message || 'Failed to connect to API'\n      };\n    }\n  }\n\n  /**\n   * Generate graphs/visualizations based on user description\n   * @param {string} userMessage - Description of the visualization to create\n   * @returns {Promise<Object>} - {success, charts, questions, error}\n   */\n  static async generateGraphs(userMessage) {\n    try {\n      const response = await fetch(`${API_BASE_URL}/graphs/generate`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          user_message: userMessage\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`API error: ${response.status}`);\n      }\n      const data = await response.json();\n      if (data.success) {\n        return {\n          success: true,\n          charts: data.charts || [],\n          questions: data.questions || '',\n          timestamp: new Date().toISOString()\n        };\n      } else {\n        return {\n          success: false,\n          error: data.error || 'Unknown error occurred'\n        };\n      }\n    } catch (error) {\n      console.error('Graph generation error:', error);\n      return {\n        success: false,\n        error: error.message || 'Failed to connect to API'\n      };\n    }\n  }\n\n  /**\n   * Check if the backend API is healthy and responding\n   * @returns {Promise<boolean>} - true if API is healthy, false otherwise\n   */\n  static async healthCheck() {\n    try {\n      const response = await fetch(`${API_BASE_URL}/health`, {\n        method: 'GET'\n      });\n      return response.ok;\n    } catch (error) {\n      console.error('Health check failed:', error);\n      return false;\n    }\n  }\n}\nexport default APIClient;","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","APIClient","analyzeText","userMessage","response","fetch","method","headers","body","JSON","stringify","user_message","ok","Error","status","data","json","success","summary","questions","results","timestamp","Date","toISOString","error","console","message","generateGraphs","charts","healthCheck"],"sources":["C:/Users/lenovo/exorvia/frontend/src/api.js"],"sourcesContent":["// ============================================================================\n// LEARNING: This is a utility module - a reusable collection of functions\n// that handle communication with the backend API. Modules like this keep\n// our code organized and maintainable by separating concerns.\n// ============================================================================\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\nclass APIClient {\n  /**\n   * =========================================================================\n   * LEARNING: Static methods belong to the class itself, not instances\n   * This means we can call APIClient.analyzeText() without creating a new\n   * instance. It's a common pattern for utility functions.\n   * =========================================================================\n   */\n\n  /**\n   * Analyze text with AI-powered SQL generation\n   * @param {string} userMessage - The user's question about their data\n   * @returns {Promise<Object>} - {success, summary, questions, results, error}\n   */\n  static async analyzeText(userMessage) {\n    try {\n      const response = await fetch(`${API_BASE_URL}/text/analyze`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          user_message: userMessage,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error(`API error: ${response.status}`);\n      }\n\n      const data = await response.json();\n      \n      if (data.success) {\n        return {\n          success: true,\n          summary: data.summary,\n          questions: data.questions || [],\n          results: data.results || [],\n          timestamp: new Date().toISOString(),\n        };\n      } else {\n        return {\n          success: false,\n          error: data.error || 'Unknown error occurred',\n        };\n      }\n    } catch (error) {\n      console.error('Text analysis error:', error);\n      return {\n        success: false,\n        error: error.message || 'Failed to connect to API',\n      };\n    }\n  }\n\n  /**\n   * Generate graphs/visualizations based on user description\n   * @param {string} userMessage - Description of the visualization to create\n   * @returns {Promise<Object>} - {success, charts, questions, error}\n   */\n  static async generateGraphs(userMessage) {\n    try {\n      const response = await fetch(`${API_BASE_URL}/graphs/generate`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          user_message: userMessage,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error(`API error: ${response.status}`);\n      }\n\n      const data = await response.json();\n      \n      if (data.success) {\n        return {\n          success: true,\n          charts: data.charts || [],\n          questions: data.questions || '',\n          timestamp: new Date().toISOString(),\n        };\n      } else {\n        return {\n          success: false,\n          error: data.error || 'Unknown error occurred',\n        };\n      }\n    } catch (error) {\n      console.error('Graph generation error:', error);\n      return {\n        success: false,\n        error: error.message || 'Failed to connect to API',\n      };\n    }\n  }\n\n  /**\n   * Check if the backend API is healthy and responding\n   * @returns {Promise<boolean>} - true if API is healthy, false otherwise\n   */\n  static async healthCheck() {\n    try {\n      const response = await fetch(`${API_BASE_URL}/health`, {\n        method: 'GET',\n      });\n      return response.ok;\n    } catch (error) {\n      console.error('Health check failed:', error);\n      return false;\n    }\n  }\n}\n\nexport default APIClient;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}